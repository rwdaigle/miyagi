worker_processes  2;
daemon off;

events {
  worker_connections  1024;
}

http {

  include       mime.types;
  default_type  application/octet-stream;

  sendfile           on;
  keepalive_timeout  65;

  port_in_redirect   off;

  server {

    listen           <%= ENV['PORT'] %>;
    server_name      <%= ENV['HOST'] || 'localhost' %>;

    index            index.html;
    try_files        $uri $uri/ /index.html;

    gzip_static      on;
    gzip_proxied     any;
    gzip_disable     "msie6";
    gzip_vary        on;


    location / {
      root           build;
      autoindex      off;
      access_log     off;
      expires        modified +<%= ENV['DEFAULT_TTL'] || 3600 %>s;
      add_header     Vary Accept-Encoding;
    }
  }
}