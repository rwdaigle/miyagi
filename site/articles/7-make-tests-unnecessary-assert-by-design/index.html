    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html>
      <head>
        <title>
          Make Tests Unnecessary: Assert by Design - Miyagi
        </title>
        <link href="/stylesheets/application.css" media="all" rel="stylesheet" type="text/css" />
        <meta content='width=device-width, initial-scale=1, maximum-scale=1' name='viewport' />
        <link href='/articles.atom' rel='alternate' title='Miyagi article feed' type='application/atom+xml' />
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
        <script type="text/javascript" src="//use.typekit.net/xii6gcf.js"></script>
        <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
        <script src="/javascripts/application.js" type="text/javascript"></script>
        <script type='text/javascript'>
          //<![CDATA[
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', '']);
            _gaq.push(['_trackPageview']);
            
            (function() {
              var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
              ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
              var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
          //]]>
        </script>
        <script type='text/javascript'>
          //<![CDATA[
            $(function() {
            
              // HN
              (function(d, t) {
                var g = d.createElement(t),
                    s = d.getElementsByTagName(t)[0];
                g.src = '//hnbutton.appspot.com/static/hn.min.js';
                s.parentNode.insertBefore(g, s);
              }(document, 'script'));
            
              // Twitter
              !function(d,s,id){
                var js,fjs=d.getElementsByTagName(s)[0];
                if(!d.getElementById(id)){
                  js=d.createElement(s);
                  js.id=id;
                  js.src="//platform.twitter.com/widgets.js";
                  fjs.parentNode.insertBefore(js,fjs);
                }
              }(document,"script","twitter-wjs");
            });
          //]]>
        </script>
      </head>
      <body>
        <header class='compact'>
          <div class='container'>
            <a class='logo' href='/'>
              <div class='icon'>&#xf101</div>
              <div class='label'>
                <h1>Miyagi</h1>
                <h2>
                  <span class='is'>is</span>
                  A Heroku inspired journal of application development
                </h2>
              </div>
            </a>
          </div>
          <div class='subscribe'>
            <a href="https://twitter.com/MiyagiJournal" class="twitter-follow-button" data-show-count="false" data-dnt="true">Follow @MiyagiJournal</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
            <!-- - if !current_user.subscribed? -->
            <!-- = form_tag(subscribe_users_path) do -->
            <!-- = text_field_tag :email, "", :size => 30, :placeholder => "Miyagi, send me new articles" -->
          </div>
        </header>
        <div class='main'>
          <article>
      <h1>Make Tests Unnecessary: Assert by Design</h1>
      <p class='date'>
        Published
        by
        Pedro Belo
        on
        December 5, 2012
      </p>
      <div class='body'><p>Sometimes tests are not the best tool to assert that code behaves the way it was intended to.</p>
    
    <p>Take SQL injection, for instance: When was the last time you wrote a test to make sure your web app is protected? Maybe back in the day when writing our own SQL layer wasn&#39;t a complete idiotic idea. Or maybe last time Paul introduced a hole and you had to write a regression test because you just don&#39;t trust the guy.</p>
    
    <p>Either way, the fact is that we just don&#39;t see any TDD enthusiast writing a SQL injection test before establishing a connection.</p>
    
    <p>&quot;Well,&quot; they say, &quot;my framework provides the protection. I should not be testing third party code!&quot;</p>
    
    <p>What about the authentication system, then? Should we write integration tests for every single endpoint in the application, making sure they are applying the right access control rules? What about audit traces, metrics logging, page caching?</p>
    
    <p>Nick Kallen says &quot;<a href="http://pivotallabs.com/users/nick/blog/articles/272-access-control-permissions-in-rails">the biggest danger with Access Control rules is the possibility that a careless Programmer might forget to implement them</a>&quot;. Even with nice helpers, patterns for testing, and 100% coverage a careless programmer can still compromise your security, and there&#39;s nothing we can do about this.</p>
    
    <p>Or is there?</p>
    
    <p>I feel pretty confident that my code is protected against SQL injection, despite not having a single test on this front. And the reason is simple: modern web applications are protected against most security vulnerabilities by design. Create a vanilla Rails application and you&#39;ll have to go out of your way to introduce vulnerabilities. Modern ORMs don&#39;t just provide security, they enforce it in their contract.</p>
    
    <p>There&#39;s nothing preventing us from getting the same kind of reassurance on other day-to-day issues: Design an authentication mechanism where it&#39;s impossible to allow access without implementing a rule; introduce a pattern so users can&#39;t perform actions without leaving an audit trace; consider open sourcing your design, when other programmers are clients you start thinking about design and contracts from another perspective.</p>
    
    <p>Well designed code will never substitute testing, but does give you the reassurance that no code coverage can match.</p>
    
    <p>Don&#39;t test for the proper development practices, codify them.</p></div>
      <div class='author'>
        <div class='name'>
          "Make Tests Unnecessary: Assert by Design" was written by <a href="http://pedro.herokuapp.com/">Pedro Belo</a>.
          <br />
          <!-- and is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>. -->
        </div>
        <!-- .links -->
        <!-- %ul -->
        <!-- %li.twitter= "@#{@article.author.twitter_username}" -->
        <!-- %li.github= @article.author.gh_username -->
        <!-- %li.site= link_to(@article.author.site_url) -->
        <div class='profile'>
          <p>Pedro is a proponent of shipping, improving and avoiding code. Current obsessions include: APIs, distributed architectures, zero downtime deploys and <a href="http://en.wikipedia.org/wiki/Caipirinha">caipirinhas</a>.</p>
        </div>
      </div>
      <!-- .license= render :partial => 'license' -->
      <!-- %h3 Links mentioned in this article -->
      <!-- %ul.link_summary -->
      <!-- - for link in @article.links -->
      <!-- %li -->
      <!-- - if icon_words.include?(link.humanized_type) -->
      <!-- = link_to(link.humanized_url, link.url, class: 'iconic', title: icon_for(link.humanized_type)) -->
      <!-- - else -->
      <!-- = link_to(link.humanized_url, link.url) -->
      <!-- /%ul#repos -->
    </article>
        </div>
        <footer>
          <p>
            Miyagi is a journal of high-quality, general-purpose technical content. Its contributors
            are thoughtful practitioners of modern application development with a variety of interests.
            Miyagi is available
            <a href="https://twitter.com/MiyagiJournal">@MiyagiJournal</a>
            and via a
            <a href="/articles.atom">feed.</a>
          </p>
          <div id='yin_yang'>
            <div class='container'>
              <div class='side sun'>&#xf107</div>
              <div class='side moon'>&#xf105</div>
            </div>
          </div>
        </footer>
      </body>
    </html>
    
